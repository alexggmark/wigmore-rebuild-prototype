<header x-data="navigationMenu()" class="relative z-50">
  <div class="bg-brand-primary-700 px-4 py-1.5 text-brand-light rounded-3xl mb-3 text-center">
    <span class="text-xs">
      Lorem, ipsum dolor
      <a href="#" class="inline-block underline"> sit amet consectetur </a>
    </span>
  </div>
  <div class="border-b border-neutral-200/80 bg-brand-light rounded-3xl mb-3">
    <div class="mx-auto flex justify-between items-center h-16 gap-8">
      <a class="block text-teal-600" href="#">
        <span class="sr-only">Home</span>
        <svg width="54" height="30" viewBox="0 0 54 30" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M53.8648 0.58332C50.982 0.58332 48.2718 2.74559 46.6245 6.25488L35.7329 30H34.4376L26.9028 16.9749L20.9578 30H19.6625L4.65261 3.99656C3.003 1.15961 2.41402 0.58332 0.17773 0.58332C-0.0592433 0.58332 -0.0592433 0.0046853 0.17773 0.0046853C1.10568 0.00780884 2.55283 0.00780884 4.51917 0.0046853C9.70958 0.00234265 11.4213 0.0046853 13.0111 0.0046853C13.2458 0.0046853 13.2458 0.580978 13.0111 0.580978C9.774 0.580978 9.59684 1.30251 11.656 4.85866L22.2531 23.2204L25.9618 15.2881L19.4278 3.99422C18.1923 1.87881 17.0742 0.580978 15.6592 0.580978C15.4222 0.580978 15.4222 0.0046853 15.6592 0.0046853C16.8372 0.0046853 16.8579 0.0046853 19.3312 0.0046853C23.7462 0.0046853 25.1381 0.0046853 26.4334 0.0046853C26.6704 0.0046853 26.6704 0.580978 26.4334 0.580978C24.3145 0.580978 24.3743 1.30251 26.4334 4.85866L29.024 9.32844L30.4965 6.10729C32.2635 2.30985 32.2635 0.578635 30.3194 0.578635C30.0824 0.578635 30.0824 0.00234265 30.3194 0.00234265C31.4973 0.00234265 30.5839 0.00234265 34.1155 0.00234265C36.0573 0.00234265 36.9707 0.00234265 38.7377 0.00234265C38.9148 0.00234265 38.9148 0.578635 38.7377 0.578635C36.0895 0.578635 33.9683 2.4059 32.2036 6.2502L30.0249 11.0081L37.0903 23.1688L44.685 6.58519C46.2748 3.12276 44.9795 0.576292 42.0369 0.576292C41.7999 0.576292 41.7999 0 42.0369 0C44.096 0 45.6927 0 48.633 0C50.8118 0 51.8655 0 53.8671 0C54.0443 0 54.0443 0.576292 53.8671 0.576292L53.8648 0.58332Z" fill="#128B9B"/>
        </svg>
      </a>

      <nav class="relative z-10">
        <div class="relative">
          <ul class="flex flex-1 justify-center items-center p-1 space-x-1 list-none text-neutral-700 group">
            <template x-for="(item, index) in menuItems" :key="index">
              <li>
                <template x-if="item.dropdown">
                  <button
                    :class="{ 'bg-neutral-100' : navigationMenu === item.id, 'hover:bg-neutral-100' : navigationMenu !== item.id }" 
                    @mouseenter="openMenu(item.id)" 
                    @mouseleave="scheduleClose()" 
                    class="inline-flex justify-center items-center px-4 py-2 w-max h-10 text-xs font-medium uppercase rounded-full transition-colors hover:text-neutral-900 focus:outline-none disabled:opacity-50 disabled:pointer-events-none group">
                    <span x-text="item.label"></span> 
                    <svg :class="{ '-rotate-180' : navigationMenuOpen && navigationMenu === item.id }" 
                        class="relative top-px ml-1 h-3 w-3 ease-out duration-300" 
                        xmlns="http://www.w3.org/2000/svg" 
                        viewBox="0 0 24 24" 
                        fill="none" 
                        stroke="currentColor" 
                        stroke-width="2" 
                        stroke-linecap="round" 
                        stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </button>
                </template>
                <template x-if="!item.dropdown">
                  <a :href="item.url" 
                    class="inline-flex justify-center items-center px-4 py-2 w-max h-10 text-xs font-medium uppercase rounded-full transition-colors hover:text-neutral-900 focus:outline-none disabled:opacity-50 disabled:pointer-events-none bg-background hover:bg-neutral-100 group">
                    <span x-text="item.label"></span>
                  </a>
                </template>
              </li>
            </template>
          </ul>
        </div>
      </nav>

      <div class="flex items-center gap-4">
        <div class="sm:flex sm:gap-2">
          <a class="bg-brand-primary inline-flex justify-center items-center px-4 py-2 w-max h-10 text-xs font-medium uppercase rounded-full text-white transition hover:bg-teal-700" href="#">
            Login
          </a>

          <a class="bg-gray-100 inline-flex justify-center items-center px-4 py-2 w-max h-10 text-xs font-medium uppercase rounded-full text-brand-primary-700 transition hover:text-teal-600/75" href="#">
            Register
          </a>
        </div>

        <button class="block rounded-sm bg-gray-100 p-2.5 text-gray-600 transition hover:text-gray-600/75 md:hidden">
          <span class="sr-only">Toggle menu</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="size-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Fixed full-width dropdown container -->
  <div x-show="navigationMenuOpen"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 -translate-y-2"
      x-transition:enter-end="opacity-100 translate-y-0"
      x-transition:leave="transition ease-in duration-150"
      x-transition:leave-start="opacity-100 translate-y-0"
      x-transition:leave-end="opacity-0 -translate-y-2"
      @mouseenter="cancelClose()" 
      @mouseleave="scheduleClose()"
      class="absolute mx-auto left-0 right-0 mt-0 w-full bg-brand-light rounded-3xl mb-3 shadow-md"
      x-cloak>

      <div class="w-full">
          <div class="max-w-5xl mx-auto overflow-hidden">
              
              <!-- Dynamic dropdown content -->
              <template x-for="(dropdown, dropdownId) in dropdownContent" :key="dropdownId">
                  <div x-show="navigationMenu === dropdownId" class="p-8">
                      <div class="grid grid-cols-4 gap-8">
                          <template x-for="(column, index) in dropdown.columns" :key="index">
                              <div>
                                  <!-- Links Column -->
                                  <template x-if="column.type === 'links'">
                                      <div>
                                          <h3 class="text-sm font-semibold text-neutral-900 mb-4" x-text="column.title"></h3>
                                          <ul class="space-y-3">
                                              <template x-for="link in column.links" :key="link.title">
                                                  <li>
                                                      <a :href="link.url" 
                                                          @click="closeMenu()"
                                                          class="group block">
                                                          <span class="block text-xs font-medium uppercase text-neutral-900 group-hover:text-blue-500" x-text="link.title"></span>
                                                          <span class="block text-xs text-neutral-500 mt-1" x-text="link.description"></span>
                                                      </a>
                                                  </li>
                                              </template>
                                          </ul>
                                      </div>
                                  </template>

                                  <!-- Banner Column -->
                                  <template x-if="column.type === 'banner'">
                                      <div class="relative h-full">
                                          <div class="rounded-lg overflow-hidden h-full bg-gradient-to-br p-6 flex flex-col justify-between min-h-[240px]"
                                                :style="`background: linear-gradient(to bottom right, ${column.gradientFrom}, ${column.gradientTo})`">
                                              <div>
                                                  <h3 class="text-lg font-bold text-white mb-2" x-text="column.title"></h3>
                                                  <p class="text-sm text-white/90 mb-4" x-text="column.description"></p>
                                              </div>
                                              <div>
                                                  <a :href="column.cta.url" 
                                                      @click="closeMenu()"
                                                      :class="column.cta.classes"
                                                      class="inline-flex items-center px-4 py-2 rounded-full text-xs font-medium uppercase transition-colors">
                                                      <span x-text="column.cta.text"></span>
                                                      <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                                      </svg>
                                                  </a>
                                              </div>
                                          </div>
                                      </div>
                                  </template>
                              </div>
                          </template>
                      </div>
                  </div>
              </template>

          </div>
      </div>
  </div>
</header>

<script>
    function navigationMenu() {
        return {
            navigationMenuOpen: false,
            navigationMenu: '',
            navigationMenuCloseTimeout: null,
            navigationMenuCloseDelay: 200,

            menuItems: [
                {
                    id: 'getting-started',
                    label: 'Getting Started',
                    dropdown: true
                },
                {
                    id: 'learn-more',
                    label: 'Learn More',
                    dropdown: true
                },
                {
                    id: 'documentation',
                    label: 'Documentation',
                    url: '#documentation',
                    dropdown: false
                },
                {
                    id: 'learn-more',
                    label: 'Learn More',
                    dropdown: false
                },
            ],

            dropdownContent: {
                'getting-started': {
                    columns: [
                        {
                            type: 'links',
                            title: 'Quick Start',
                            links: [
                                {
                                    title: 'Introduction',
                                    description: 'Learn the basics and get up to speed quickly',
                                    url: '#introduction'
                                },
                                {
                                    title: 'Installation',
                                    description: 'Set up your development environment',
                                    url: '#installation'
                                },
                                {
                                    title: 'First Project',
                                    description: 'Build your first project step by step',
                                    url: '#first-project'
                                }
                            ]
                        },
                        {
                            type: 'links',
                            title: 'Resources',
                            links: [
                                {
                                    title: 'Components',
                                    description: 'Browse our collection of UI components',
                                    url: '#components'
                                },
                                {
                                    title: 'Templates',
                                    description: 'Pre-built templates to jumpstart your project',
                                    url: '#templates'
                                },
                                {
                                    title: 'Examples',
                                    description: 'Real-world examples and use cases',
                                    url: '#examples'
                                }
                            ]
                        },
                        {
                            type: 'links',
                            title: 'Help & Support',
                            links: [
                                {
                                    title: 'Documentation',
                                    description: 'Comprehensive guides and API reference',
                                    url: '#docs'
                                },
                                {
                                    title: 'Community',
                                    description: 'Join our community forum',
                                    url: '#community'
                                },
                                {
                                    title: 'FAQ',
                                    description: 'Frequently asked questions',
                                    url: '#faq'
                                }
                            ]
                        },
                        {
                            type: 'banner',
                            title: 'Ready to Build?',
                            description: 'Start creating amazing projects with our comprehensive toolkit and resources.',
                            gradientFrom: '#379190',
                            gradientTo: '#287271',
                            cta: {
                                text: 'Get Started Free',
                                url: '#signup',
                                classes: 'bg-white text-brand-primary hover:text-blue-500 hover:bg-blue-50'
                            }
                        }
                    ]
                },
                'learn-more': {
                    columns: [
                        {
                            type: 'links',
                            title: 'Frameworks',
                            links: [
                                {
                                    title: 'Tailwind CSS',
                                    description: 'Utility-first CSS framework',
                                    url: '#tailwind'
                                },
                                {
                                    title: 'Alpine.js',
                                    description: 'Lightweight JavaScript framework',
                                    url: '#alpine'
                                },
                                {
                                    title: 'Laravel',
                                    description: 'PHP framework for web artisans',
                                    url: '#laravel'
                                }
                            ]
                        },
                        {
                            type: 'links',
                            title: 'Tools',
                            links: [
                                {
                                    title: 'Livewire',
                                    description: 'Full-stack framework for Laravel',
                                    url: '#livewire'
                                },
                                {
                                    title: 'Vite',
                                    description: 'Next generation frontend tooling',
                                    url: '#vite'
                                },
                                {
                                    title: 'Tails',
                                    description: 'Tailwind CSS design tool',
                                    url: '#tails'
                                }
                            ]
                        },
                        {
                            type: 'links',
                            title: 'Learning',
                            links: [
                                {
                                    title: 'Video Tutorials',
                                    description: 'Step-by-step video guides',
                                    url: '#videos'
                                },
                                {
                                    title: 'Blog',
                                    description: 'Latest news and articles',
                                    url: '#blog'
                                },
                                {
                                    title: 'Courses',
                                    description: 'In-depth courses and workshops',
                                    url: '#courses'
                                }
                            ]
                        },
                        {
                            type: 'banner',
                            title: 'Expert Training',
                            description: 'Take your skills to the next level with our advanced courses and certifications.',
                            gradientFrom: '#059669',
                            gradientTo: '#0f766e',
                            cta: {
                                text: 'Browse Courses',
                                url: '#courses',
                                classes: 'bg-white text-emerald-600 hover:bg-emerald-50'
                            }
                        }
                    ]
                }
            },

            openMenu(menuId) {
                this.cancelClose();
                this.navigationMenuOpen = true;
                this.navigationMenu = menuId;
            },

            scheduleClose() {
                this.navigationMenuCloseTimeout = setTimeout(() => {
                    this.closeMenu();
                }, this.navigationMenuCloseDelay);
            },

            cancelClose() {
                if (this.navigationMenuCloseTimeout) {
                    clearTimeout(this.navigationMenuCloseTimeout);
                    this.navigationMenuCloseTimeout = null;
                }
            },

            closeMenu() {
                this.navigationMenuOpen = false;
                this.navigationMenu = '';
            }
        }
    }
</script>